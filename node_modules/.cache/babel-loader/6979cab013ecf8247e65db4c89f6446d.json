{"ast":null,"code":"export default async function display7DayData(location) {\n  if (!location) {\n    alert(\"Unexpected error. Try again\");\n  }\n  let ifSavedLocation = false;\n  let index = 0;\n  const getSavedLocations = JSON.parse(localStorage.getItem(\"savedLocations\"));\n  for (index = 0; index < getSavedLocations.length; index++) {\n    if (location === getSavedLocations[index]) {\n      ifSavedLocation = true;\n      break;\n    }\n  }\n  let sevenDayData = [];\n  let hourlyData = [];\n  let getAllCoordinates;\n\n  // the location provided to us is not in the saved location, so we need to go get that lat and lon for that location\n  if (!ifSavedLocation) {\n    // alert(\"Not in saved locations\");\n    // let endpoint = `https://api.openweathermap.org/geo/1.0/direct?q=${getSearch[0]}&appid=e15a543800b7e60db9e4e04aaf22a037`; // api to get coordinates lat and lon\n    // const response = await fetch(endpoint);\n    // const responseData = await response.json();\n    // const newCoor = [responseData[0].lat, responseData[0].lon];\n    // getAllCoordinates = newCoor;\n    return;\n  } else {\n    getAllCoordinates = JSON.parse(localStorage.getItem(\"allCoordinates\"));\n    if (!getAllCoordinates) {\n      let defaultLatLong = [[40.7128, -74.0060], [48.8566, 2.3522], [52.5200, 13.4050]];\n      getAllCoordinates = defaultLatLong;\n    }\n    let getNeededCoordinates = getAllCoordinates[index];\n    let endpoint = `https://api.openweathermap.org/data/2.5/onecall?lat=${getNeededCoordinates[0]}&lon=${getNeededCoordinates[1]}&exclude=current,minutely,alerts&units=imperial&appid=e15a543800b7e60db9e4e04aaf22a037`;\n    const response = await fetch(endpoint);\n    if (response.status !== 200) {\n      alert(\"Unexpected error happened. Please try again\");\n      return;\n    }\n    const data = await response.json();\n\n    // this code is to get the hourly data\n    data.hourly.forEach((value, idx) => {\n      if (idx < 24 && hourlyData.length !== 24) {\n        const currentDate = new Date(value.dt * 1000);\n        const currentHour = currentDate.getHours();\n        let hourFormat;\n        if (currentHour > 11) {\n          const difference = currentHour - 12;\n          hourFormat = `${currentHour - difference}:00 pm`;\n        } else {\n          hourFormat = `${currentHour}:00 am`;\n        }\n        const hourTemp = value.temp.toFixed(0);\n        const rainProb = value.pop * 100;\n        const hourIcon = value.weather[0].icon;\n        const iconURL = `https://openweathermap.org/img/wn/${hourIcon}@2x.png`;\n        const hourDescription = value.weather[0].main;\n        const currentHourData = [hourFormat, hourTemp, iconURL, hourDescription, rainProb];\n        hourlyData.push(currentHourData);\n      }\n    });\n\n    // this code is to get the 7 day data\n    data.daily.forEach((value, idx) => {\n      if (idx >= 0 && idx !== 7 && sevenDayData.length !== 7) {\n        let dayname = new Date(value.dt * 1000).toLocaleDateString(\"en\", {\n          weekday: \"long\"\n        });\n        let icon = value.weather[0].icon;\n        let iconURL = `https://openweathermap.org/img/wn/${icon}@2x.png`;\n        let getProb = value.pop;\n        let rainProb = getProb * 100;\n        let minTemp = value.temp.min.toFixed(0);\n        let maxTemp = value.temp.max.toFixed(0);\n        let currentDayData = [dayname, rainProb, iconURL, minTemp, maxTemp];\n        sevenDayData.push(currentDayData);\n      }\n    });\n  }\n  return [hourlyData, sevenDayData];\n}\n\n/**This is the code for the old weather api */\n\n// export default async function display7DayData(location) {\n//     if (!location) {\n//         alert(\"Unexpected error. Try again\");\n//     }\n\n//     let ifSavedLocation = true;\n//     let index = 0;\n//     const getSavedLocations = JSON.parse(localStorage.getItem(\"savedLocations\")); \n//     for (index = 0; index < getSavedLocations.length; index++) {\n//         if (location === getSavedLocations[index]) {\n//             break;\n//         }\n//     }\n\n//     if (!ifSavedLocation) {\n//         alert(\"Not in saved locations\");\n//         return;\n//     }\n\n//     let getAllCoordinates = JSON.parse(localStorage.getItem(\"allCoordinates\"));\n//     if (!getAllCoordinates) {\n//         getAllCoordinates = [[40.7127281,-74.0060152],[48.8588897,2.3200410217200766],[52.5170365,13.3888599]];\n//     }\n\n//     let getNeededCoordinates = getAllCoordinates[index];\n//     let endpoint = `https://api.weather.gov/points/${getNeededCoordinates[0]},${getNeededCoordinates[1]}`;\n//     const response = await fetch(endpoint);\n\n//     if (response.status !== 200) {\n//         alert(\"Unexpected error happened. Please try again\");\n//         return;\n//     }\n\n//     const data = await response.json();\n//     let forecastData = await data.properties.forecast;\n//     let response2 = await fetch(forecastData);\n\n//     if (response2.status !== 200) {\n//         alert(\"Unexpected error happened. Please try again\");\n//         return;\n//     }\n\n//     const data2 = await response2.json();\n//     let dailyData = await data2.properties.periods;\n//     let dataForAllDays = [];\n//     dailyData.forEach((value, idx) => {\n//         if (value.name.includes(\"Night\") === false && dataForAllDays.length !== 7) {\n//             let day = value.name;\n//             let temp = value.temperature;\n//             let icon = value.icon;\n//             let currentDayData = [day, temp, icon];\n//             dataForAllDays.push(currentDayData);\n//         }\n//     });\n\n//     return dataForAllDays;\n//     // let dataForAllDays = [];\n\n//     // data.daily.forEach((value, idx) => {\n//     //     if (idx >= 0 && idx !== 7 && dataForAllDays.length !== 7) {\n//     //         let dayname = new Date(value.dt * 1000).toLocaleDateString(\"en\", {\n//     //             weekday: \"long\",\n//     //         });\n//     //         let icon = value.weather[0].icon;\n//     //         let iconURL = `https://openweathermap.org/img/wn/${icon}@2x.png`;\n//     //         let getProb = value.pop;\n//     //         let rainProb = getProb * 100;\n//     //         let minTemp = value.temp.min.toFixed(0);\n//     //         let maxTemp = value.temp.max.toFixed(0);\n//     //         let currentDayData = [dayname, rainProb, iconURL, minTemp, maxTemp];\n//     //         dataForAllDays.push(currentDayData);\n//     //     }\n//     // });\n\n//     // return dataForAllDays;\n// }","map":{"version":3,"names":["display7DayData","location","alert","ifSavedLocation","index","getSavedLocations","JSON","parse","localStorage","getItem","length","sevenDayData","hourlyData","getAllCoordinates","defaultLatLong","getNeededCoordinates","endpoint","response","fetch","status","data","json","hourly","forEach","value","idx","currentDate","Date","dt","currentHour","getHours","hourFormat","difference","hourTemp","temp","toFixed","rainProb","pop","hourIcon","weather","icon","iconURL","hourDescription","main","currentHourData","push","daily","dayname","toLocaleDateString","weekday","getProb","minTemp","min","maxTemp","max","currentDayData"],"sources":["/Users/emmanuelsotoruiz/Desktop/NYU/Fifth Year/Build Software/projects/final_project/WeatherApp/src/pages/Components/Helpers.js"],"sourcesContent":["export default async function display7DayData(location) {\r\n    if (!location) {\r\n        alert(\"Unexpected error. Try again\");\r\n    }\r\n\r\n    let ifSavedLocation = false;\r\n    let index = 0;\r\n    const getSavedLocations = JSON.parse(localStorage.getItem(\"savedLocations\")); \r\n    for (index = 0; index < getSavedLocations.length; index++) {\r\n        if (location === getSavedLocations[index]) {\r\n            ifSavedLocation = true;\r\n            break;\r\n        }\r\n    }\r\n\r\n    let sevenDayData = [];\r\n    let hourlyData = [];\r\n    let getAllCoordinates;\r\n\r\n    // the location provided to us is not in the saved location, so we need to go get that lat and lon for that location\r\n    if (!ifSavedLocation) {\r\n        // alert(\"Not in saved locations\");\r\n        // let endpoint = `https://api.openweathermap.org/geo/1.0/direct?q=${getSearch[0]}&appid=e15a543800b7e60db9e4e04aaf22a037`; // api to get coordinates lat and lon\r\n        // const response = await fetch(endpoint);\r\n        // const responseData = await response.json();\r\n        // const newCoor = [responseData[0].lat, responseData[0].lon];\r\n        // getAllCoordinates = newCoor;\r\n        return;\r\n    } else {\r\n        getAllCoordinates = JSON.parse(localStorage.getItem(\"allCoordinates\"));\r\n        if (!getAllCoordinates) {\r\n            let defaultLatLong = [[40.7128,-74.0060],[48.8566,2.3522],[52.5200,13.4050]];\r\n            getAllCoordinates = defaultLatLong;\r\n        }\r\n        let getNeededCoordinates = getAllCoordinates[index];\r\n        let endpoint = `https://api.openweathermap.org/data/2.5/onecall?lat=${getNeededCoordinates[0]}&lon=${getNeededCoordinates[1]}&exclude=current,minutely,alerts&units=imperial&appid=e15a543800b7e60db9e4e04aaf22a037`;\r\n        const response = await fetch(endpoint);\r\n\r\n        if (response.status !== 200) {\r\n            alert(\"Unexpected error happened. Please try again\");\r\n            return;\r\n        }\r\n\r\n        const data = await response.json();\r\n\r\n        // this code is to get the hourly data\r\n        data.hourly.forEach((value, idx) => {\r\n            if (idx < 24 && hourlyData.length !== 24) {\r\n                const currentDate = new Date(value.dt * 1000);\r\n                const currentHour = currentDate.getHours();\r\n                let hourFormat;\r\n                if (currentHour > 11) {\r\n                    const difference = currentHour - 12;\r\n                    hourFormat = `${currentHour-difference}:00 pm`;\r\n                } else {\r\n                    hourFormat = `${currentHour}:00 am`;\r\n                }\r\n                const hourTemp = value.temp.toFixed(0);\r\n                const rainProb = value.pop * 100;\r\n                const hourIcon = value.weather[0].icon;\r\n                const iconURL = `https://openweathermap.org/img/wn/${hourIcon}@2x.png`;\r\n                const hourDescription = value.weather[0].main;\r\n                const currentHourData = [hourFormat, hourTemp, iconURL, hourDescription, rainProb];\r\n                hourlyData.push(currentHourData);\r\n            }\r\n        });\r\n\r\n        // this code is to get the 7 day data\r\n        data.daily.forEach((value, idx) => {\r\n            if (idx >= 0 && idx !== 7 && sevenDayData.length !== 7) {\r\n                let dayname = new Date(value.dt * 1000).toLocaleDateString(\"en\", {\r\n                    weekday: \"long\",\r\n                });\r\n                let icon = value.weather[0].icon;\r\n                let iconURL = `https://openweathermap.org/img/wn/${icon}@2x.png`;\r\n                let getProb = value.pop;\r\n                let rainProb = getProb * 100;\r\n                let minTemp = value.temp.min.toFixed(0);\r\n                let maxTemp = value.temp.max.toFixed(0);\r\n                let currentDayData = [dayname, rainProb, iconURL, minTemp, maxTemp];\r\n                sevenDayData.push(currentDayData);\r\n            }\r\n        });\r\n    }\r\n\r\n    return [hourlyData, sevenDayData];\r\n}\r\n\r\n\r\n/**This is the code for the old weather api */\r\n\r\n// export default async function display7DayData(location) {\r\n//     if (!location) {\r\n//         alert(\"Unexpected error. Try again\");\r\n//     }\r\n\r\n//     let ifSavedLocation = true;\r\n//     let index = 0;\r\n//     const getSavedLocations = JSON.parse(localStorage.getItem(\"savedLocations\")); \r\n//     for (index = 0; index < getSavedLocations.length; index++) {\r\n//         if (location === getSavedLocations[index]) {\r\n//             break;\r\n//         }\r\n//     }\r\n\r\n//     if (!ifSavedLocation) {\r\n//         alert(\"Not in saved locations\");\r\n//         return;\r\n//     }\r\n\r\n//     let getAllCoordinates = JSON.parse(localStorage.getItem(\"allCoordinates\"));\r\n//     if (!getAllCoordinates) {\r\n//         getAllCoordinates = [[40.7127281,-74.0060152],[48.8588897,2.3200410217200766],[52.5170365,13.3888599]];\r\n//     }\r\n\r\n//     let getNeededCoordinates = getAllCoordinates[index];\r\n//     let endpoint = `https://api.weather.gov/points/${getNeededCoordinates[0]},${getNeededCoordinates[1]}`;\r\n//     const response = await fetch(endpoint);\r\n\r\n//     if (response.status !== 200) {\r\n//         alert(\"Unexpected error happened. Please try again\");\r\n//         return;\r\n//     }\r\n\r\n//     const data = await response.json();\r\n//     let forecastData = await data.properties.forecast;\r\n//     let response2 = await fetch(forecastData);\r\n\r\n//     if (response2.status !== 200) {\r\n//         alert(\"Unexpected error happened. Please try again\");\r\n//         return;\r\n//     }\r\n\r\n//     const data2 = await response2.json();\r\n//     let dailyData = await data2.properties.periods;\r\n//     let dataForAllDays = [];\r\n//     dailyData.forEach((value, idx) => {\r\n//         if (value.name.includes(\"Night\") === false && dataForAllDays.length !== 7) {\r\n//             let day = value.name;\r\n//             let temp = value.temperature;\r\n//             let icon = value.icon;\r\n//             let currentDayData = [day, temp, icon];\r\n//             dataForAllDays.push(currentDayData);\r\n//         }\r\n//     });\r\n\r\n//     return dataForAllDays;\r\n//     // let dataForAllDays = [];\r\n\r\n//     // data.daily.forEach((value, idx) => {\r\n//     //     if (idx >= 0 && idx !== 7 && dataForAllDays.length !== 7) {\r\n//     //         let dayname = new Date(value.dt * 1000).toLocaleDateString(\"en\", {\r\n//     //             weekday: \"long\",\r\n//     //         });\r\n//     //         let icon = value.weather[0].icon;\r\n//     //         let iconURL = `https://openweathermap.org/img/wn/${icon}@2x.png`;\r\n//     //         let getProb = value.pop;\r\n//     //         let rainProb = getProb * 100;\r\n//     //         let minTemp = value.temp.min.toFixed(0);\r\n//     //         let maxTemp = value.temp.max.toFixed(0);\r\n//     //         let currentDayData = [dayname, rainProb, iconURL, minTemp, maxTemp];\r\n//     //         dataForAllDays.push(currentDayData);\r\n//     //     }\r\n//     // });\r\n\r\n//     // return dataForAllDays;\r\n// }"],"mappings":"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QAChE,IAAIU,OAAO,GAAG1B,KAAK,CAACa,GAAG;QACvB,IAAID,QAAQ,GAAGc,OAAO,GAAG,GAAG;QAC5B,IAAIC,OAAO,GAAG3B,KAAK,CAACU,IAAI,CAACkB,GAAG,CAACjB,OAAO,CAAC,CAAC,CAAC;QACvC,IAAIkB,OAAO,GAAG7B,KAAK,CAACU,IAAI,CAACoB,GAAG,CAACnB,OAAO,CAAC,CAAC,CAAC;QACvC,IAAIoB,cAAc,GAAG,CAACR,OAAO,EAAEX,QAAQ,EAAEK,OAAO,EAAEU,OAAO,EAAEE,OAAO,CAAC;QACnE1C,YAAY,CAACkC,IAAI,CAACU,cAAc,CAAC;MACrC;IACJ,CAAC,CAAC;EACN;EAEA,OAAO,CAAC3C,UAAU,EAAED,YAAY,CAAC;AACrC;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA"},"metadata":{},"sourceType":"module"}